<!DOCTYPE html>
<html>
<head>
<title>Distance watcher</title>
</head>
<body>
  <div>
    Destination:<br/>
    lat:<input id="dest_lat" value="12.993594" /><br/>
    lon:<input id="dest_lon" value="77.663911" /><br/>
    Current location:<br/>
    lat:<input id="cur_lat" disabled /><br/>
    lon:<input id="cur_lon" disabled /><br/>
  </div>
  <div id="message"></div>
  <script type="text/javascript">
    var message = byId('message'),
        dest_lat = byId('dest_lat'),
        dest_lon = byId('dest_lon'),
        cur_lat = byId('cur_lat'),
        cur_lon = byId('cur_lon');

    function dist(a, b) {
      var R = 6371; // Radius of the earth in km
      var dLat = deg2rad(a.latitude-b.latitude);  // deg2rad below
      var dLon = deg2rad(a.longitude-b.longitude); 
      var a = 
        Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(deg2rad(b.latitude)) * Math.cos(deg2rad(a.latitude)) * 
        Math.sin(dLon/2) * Math.sin(dLon/2); 
      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
      var d = R * c; // Distance in km
      return d;
    }

    function deg2rad(deg) {
      return deg * (Math.PI/180)
    }

    function byId(id) {
      return document.getElementById(id);
    }

    function getToCompare() {
      return {
        latitude: dest_lat.value,
        longitude: dest_lon.value
      };
    }

    navigator.geolocation.watchPosition(function(position) {
      cur_lat.value = position.coords.latitude;
      cur_lon.value = position.coords.longitude;
      var cur_dist = dist(position.coords, getToCompare());
      if (cur_dist < 0.2)
        message.innerHTML = "You're there";
      else
        message.innerHTML = cur_dist + " km to go...";
    });
  </script>
</body>
</html>
