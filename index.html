<!DOCTYPE html>
<html>
<head>
<title>Hello title</title>
</head>
<body>
  Hello world!!
  <div>
    Compared to:<br/>
    lat:<input id="lat" /><br/>
    lon:<input id="lon" /><br/>
  </div>
  <div id="location"></div>
  <script type="text/javascript">
    var loc = document.getElementById('location');
    function dist(a, b) {
      var R = 6371; // Radius of the earth in km
      var dLat = deg2rad(a.latitude-b.latitude);  // deg2rad below
      var dLon = deg2rad(a.longitude-b.longitude); 
      var a = 
        Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(deg2rad(b.latitude)) * Math.cos(deg2rad(a.latitude)) * 
        Math.sin(dLon/2) * Math.sin(dLon/2); 
      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
      var d = R * c; // Distance in km
      return d;
    }

    function deg2rad(deg) {
      return deg * (Math.PI/180)
    }

    function byId(id) {
      return document.getElementById(id);
    }

    function getToCompare() {
      return {
        latitude: byId('lat'),
        longitude: byId('lon')
      };
    }

    poller = setInterval(function() {
      navigator.geolocation.getCurrentPosition(function(position) {
        var cur_dist = dist(position.coords, getToCompare());
        if (cur_dist < 0.01) {
          loc.innerHTML = "Near";
          clearInterval(poller);
        } else {
          loc.innerHTML += position.coords.latitude + "," + position.coords.longitude + " " + cur_dist + "<br/>";
        }
      });
    }, 5000);
  </script>
</body>
</html>
